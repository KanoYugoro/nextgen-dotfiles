#!/usr/bin/env babel-node

import fsp from 'fs-promise';
import path from 'path';
import dateFormat from 'dateformat';

fsp.readdir(path.join(__dirname, 'node_modules/.bin'))
  .then(folders => {
    let aliases = folders.map(x => `alias ${x}="npm-exec ${x}"`);
    aliases = [
      `# This file was generated by ${__filename}`,
      `# Generated: ${dateFormat(Date.now(), 'dddd, mmmm dS, yyyy @ HH:MM:ss')}`,
      '',
      'alias npm-exec="PATH=$(npm bin):$PATH"',
      '',
      ...aliases].join('\n');

    return fsp.writeFile(path.join(__dirname, '_zsh-config/aliases/npm_private'), aliases);
  })
  .catch(err => console.log(err.stack));
